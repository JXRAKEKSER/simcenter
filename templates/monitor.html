
<!DOCTYPE html>

<html>
<head>

<script src="https://code.jquery.com/jquery-3.2.1.js"></script>
<style>

body {
  background-image: url({{ url_for ('static', filename = 'images/whi.jpg')}});
  background-repeat: no-repeat;
  background-attachment: fixed; 
  background-size: 100% 100%;
  overflow:hidden;
}



table {
  position: absolute;
  top: 50px;
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
  align: centr;
}

tr:nth-child(even) {
  background-color: #dddddd;
}

</style>
<title>(Type a title for your page here)</title>

<script>function display_ct7() {
 x = new Date()
 hours = x.getHours().toString()
hours=hours.length==1 ? 0+hours : hours;

 minutes=x.getMinutes().toString()
minutes=minutes.length==1 ? 0+minutes : minutes;

 seconds=x.getSeconds().toString()
seconds=seconds.length==1 ? 0+seconds : seconds;

var month=(x.getMonth() +1).toString();
month=month.length==1 ? 0+month : month;

var dt=x.getDate().toString();
dt=dt.length==1 ? 0+dt : dt;
var x1= dt + "/" + month + "/" +  x.getFullYear(); 
x1 = x1 + " - " +  hours + ":" +  minutes + ":" +  seconds;
document.getElementById('ct7').innerHTML = x1;
document.getElementById('ct7').style.fontSize='30px';
document.getElementById('ct7').style.color='#006400';

 }
 function display_c7(){
var refresh=1000; // Refresh rate in milli seconds
mytime=setInterval('display_ct7()',refresh)
}
display_c7()
gh = '0'
</script>


<span id='ct7' style="background-color: none"></span>
</head>

<body onload=display_ct7();>

<span id='ct' ></span>
<div id="from">
<table>
	{% if logs|length > 0 and rr|length > 0  %}
		{%for el in logs [:1]|sort(attribute='time') %}
		
		 <tr>
				<td colspan="3" style="text-align:center; font-size: 25px; height:120px; ">{{rr[0].briefing}}</td>
				
			  </tr>
		{%endfor%}
		
	{% endif %}	
	{% if test4|length > 0 and rr|length > 0 and logs|length == 0 %}

		{%for el in test4 [:1]|sort(attribute='id') %}
			  <tr>
				<th colspan="3" style="text-align:center;  font-size: 35px; height:65px;" >Специальность</th>
				
			  </tr>
			  <tr>
				<td colspan="3" style="text-align:center; font-size: 25px; height:120px; ">{{el.specialization}}</td>
				
			  </tr>
			  <tr>
				<td colspan="3" style="text-align:center; height:65px; font-size: 35px;"><b>Станция</b></td>
				
			  </tr>
			  <tr>
				<td colspan="3" style="text-align:center;font-size: 25px;height:120px;">{{rr[0].name}}</td>
				
			  </tr>
			  <tr>
				<td style="text-align:center; font-size: 30px; height: 65px; width:30%;"><b>Индивидуальный <br>Номер</td>
				<td style="text-align:center; height:65px; font-size: 30px; width:40%;"><b>Аккредитуемый</td>
				<td style="text-align:center; height:65px; font-size: 30px; width:30%;"><b>Время начала</td>
			  </tr>
			  <tr>
				<td style="text-align:center;font-size: 25px; height:60px; width:30%; ">{{el.id_stud}}</td>
				<td style="text-align:center;font-size: 25px;height:60px; width:40%; ">{{el.student}}</td>
				<td id="kgt" style="text-align:center;font-size: 25px;height:60px; width:30%; ">{{el.time_begin}}</td>
			  </tr>
		{%endfor%}
	{% elif test4|length == 0 and logs|length == 0 %}
				<tr>
				<th colspan="3" style="text-align:center;  font-size: 35px; style= height:65px;" >Специальность</th>
				
			  </tr>
			  <tr>
				<td colspan="3" style="text-align:center;font-size: 25px; height:120px; ">[Здесь будет отображена специальность аккредитуемого]</td>
				
			  </tr>
			  <tr>
				<td colspan="3" style="text-align:center; height:65px; font-size: 35px;"><b>Станция</b></td>
				
			  </tr>
			  <tr>
				<td colspan="3" style="text-align:center;font-size: 25px; height:120px;">[Здесь будет отображено название станции]</td>
				
			  </tr>
			  <tr valign="center">
				<td style="text-align:center; font-size: 30px; style= height:65px; width:30%;"><b>Индивидуальный <br>Номер</td>
				<td style="text-align:center; font-size: 30px; style= height:65px; width:40%;"><b>Аккредитуемый</td>
				<td style="text-align:center; font-size: 30px; style= height:65px; width:30%;"><b>Время начала</td>
			  </tr>
			  <tr>
				<td style="text-align:center;font-size: 25px; height:60px; width:30%; "></td>
				<td style="text-align:center;font-size: 25px; height:60px; width:40%; "></td>
				<td style="text-align:center;font-size: 25px;height:60px; width:30%; "></td>
			  </tr>
	
	{% endif %}
	</table>
	
{% if test7|length > 0 and rr|length > 0  %}

		{%for el in test7 [:1]|sort(attribute='time_begin') %}


			<script>
			function go(){
			 x = new Date(Date.now() + (1 * 60 * 1000))
 hours = x.getHours().toString()
hours=hours.length==1 ? 0+hours : hours;

 minutes=x.getMinutes().toString()
minutes=minutes.length==1 ? 0+minutes : minutes;

 seconds=x.getSeconds().toString()
seconds=seconds.length==1 ? 0+seconds : seconds;
			var xl1= hours + ":" +  minutes + ":" +  seconds;
			var Myvar = "{{el.time_end}}" + ":00";
			//console.log(Myvar);
			//console.log(xl1);
			if (Myvar == xl1 && kpl == "0"){ 
                        kpl = "1"
			//console.log("РАБОТАЕТ"); 			
			var synth = window.speechSynthesis;
    			message = new SpeechSynthesisUtterance();
    			message.rate=0.8;
    			message.text ='У вас осталась одна минута.' ;
    			synth.speak(message); 
    			speechSynthesis.getVoices();
			}
			}
			pppl = setInterval('go()',500)
			gh = "1"



			  </script>
{%endfor%}
{% endif %}

</div>
<script>
var currentLocation = window.location.href;
setTimeout(function newsId(){			
$.ajax({
    type: "GET",
    url: currentLocation + "#from > *",
    data: "#from",
    async: true,
    success: function(result){
			if (gh == "1"){
            clearInterval(pppl);}
            kpl = "0";
			clearInterval(mytime);
           			//setInterval('go()',1000);
            $("#from").html(result);	
			}
			
});}	,3000);
</script>

</body>
</html>



